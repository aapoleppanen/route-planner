# query to get stops
query stop($id: String!) {
  stop(id: $id) {
    name
    lat
    lon
  }
}

# plan query

query routes($from: InputCoordinates!, $to: InputCoordinates!) {
  plan(from: $from, to: $to, numItineraries: 5) {
    itineraries {
      walkDistance
      duration
      legs {
        route {
          gtfsId
        }
        mode
        startTime
        endTime
        from {
          lat
          lon
          name
          stop {
            lat
            lon
            code
            name
            gtfsId
            vehicleMode
            stoptimesForPatterns(omitNonPickups: true, timeRange: 1800) {
              pattern {
                code
              }
              stoptimes {
                scheduledDeparture
              }
            }
          }
        }
        to {
          lat
          lon
          name
          stop {
            lat
            lon
            name
            code
            vehicleMode
            patterns {
              code
            }
          }
        }
        trip {
          gtfsId
          routeShortName
          pattern {
            code
          }
          tripHeadsign
        }
        legGeometry {
          length
          points
        }
      }
    }
  }
}
